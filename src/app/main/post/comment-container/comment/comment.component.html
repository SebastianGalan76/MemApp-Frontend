<div id="container">
    <div id="content">
        <div id="header">
            @if (isReply) {
            <div id="line">
                <div id="circle"></div>
            </div>
            }

            <div id="basic-information">
                <div id="user-picture">
                    <img
                        src="https://e7.pngegg.com/pngimages/312/283/png-clipart-man-s-face-avatar-computer-icons-user-profile-business-user-avatar-blue-face-thumbnail.png" />
                </div>
                <div>
                    <div id="user-name">
                        {{comment.author.login}}
                    </div>
                    <div id="publication-date">
                        {{comment.createdAt | date:'dd.MM.yyyy HH:mm'}}
                    </div>
                </div>
            </div>
            <i id="button" class="fa-solid fa-ellipsis"></i>
        </div>
        <div id="text">
            {{comment.content}}
        </div>
        <div id="footer">
            @if (comment.reply.totalReplies > 0) {
            <div class="replies" (click)="isRepliesExpanded = !isRepliesExpanded">
                @if (!isRepliesExpanded) {
                <i class="icon fa-solid fa-circle-chevron-down" title="Pokaż odpowiedzi"></i>
                }
                @else {
                <i class="icon fa-solid fa-circle-chevron-up" title="Schowaj odpowiedzi"></i>
                }
            </div>
            }
            <div id="menu">
                <comment-rating-section />

                <div class="comment section" (click)="reply()">
                    <i class="icon fa-solid fa-comment"></i>
                    <div class="value">Odpowiedz</div>
                </div>
            </div>
        </div>
    </div>
    <div id="replies">
        <div id="vertical-line">

        </div>
        <div id="replies-wrapper" [ngClass]="{'expanded': isRepliesExpanded}">
            @if (isFormActive) {
            <app-create-comment [id]="comment.id" [type]="'COMMENT'" (onSuccess)="addNewComment($event)"
                (onCancel)="isFormActive = false" />
            }
            <div id="replies-container" #repliesContainer>

            </div>
            @if (comment.reply.totalReplies > comment.reply.replies.length) { <div id="load-more-button"
                (click)="loadReplies()">
                <div id="line">
                    <div id="circle"></div>
                </div>
                <i class="fa-solid fa-chevron-down"></i> {{comment.reply.totalReplies - comment.reply.replies.length}}
                @if (comment.reply.totalReplies - comment.reply.replies.length > 1) {
                odpowiedzi
                }
                @else {
                odpowiedź
                }
            </div>
            }
        </div>
    </div>
</div>